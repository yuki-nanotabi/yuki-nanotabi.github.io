<!DOCTYPE html>
<html lang="ja">
<HEAD>
<META http-equiv=Content-Type content="text/html; charset=utf-8">
<META name="keywords" content="官能小説,自動生成,七度文庫,エンターブレイン,ゲームコンテスト,伊集院光,七度言語,仕様,ソースコード">
<META name="description" content="小説記述言語「七度言語」仕様">
<TITLE>小説記述言語「七度言語」仕様</TITLE>
</HEAD>
<BODY>
<BR>
<H2>7th_language 七度言語(なのたびげんご)仕様</H2>
<OL><BR>
<H3><LI>はじめに</H3>
<BR>
七度言語は、小説を自動生成するための言語である。<BR>
現在の仕様では七度文庫を作成するための最小限の機能のみを持つ。<BR>
音声、画像や、ユーザーによるストーリーの選択などの機能はないが、<BR>
小説の生成のために必要なが機能をいろいろと工夫してある。<BR>
<BR>
終了命令がない、ジャンプ命令がないなど言語としては特異な面もあるが、<BR>
これらの命令が、デバッグを行う上で悲惨な結果を及ぼすことは、プログラマーなら誰でもよく知っていることである。<BR>
また小説は基本的にループすることはないので、ループ命令もない。<BR>
<BR>
七度言語で作成されたシナリオは、七度リーダー(7thReader.exe)によって実際に小説を生成することができる。
<BR>
<BR>
七度言語だけでは、シナリオの自動生成にはまだ不十分なので、<BR>
シナリオのデータベース(いわゆるネタ帳)から七度言語のソースコードを生成する<BR>
メタ言語の開発を予定している。<BR>
<BR>
<BR>
説明をわかりやすくするため、<FONT COLOR="#800080">言語のソースコード<BR>
</FONT><BR>
と<FONT COLOR="#800000">生成される小説の例</FONT>を色分けして書くことにする。<BR>
<BR>
<H3><LI>言語の約束</H3>
<BR>
半角文字はすべてプログラム制御文字に使用する。<BR>
小説として記述する文章はすべて全角文字を使用しなければならない。<BR>
半角のスペース記号は文字の区切りとして使われる以外には、<BR>
生成される文章では基本的にはすべて無視される。<BR>
<BR>
予約された制御文字は<BR>
<FONT COLOR="#800080">{}[]&lt;&gt;!#=&amp;+-;$\/</FONT><BR>
などである<BR>
<BR>
予約されたキーワードは<BR>
<FONT COLOR="#800080">title<BR>
end<BR>
select <BR>
scene</FONT><BR>
などである<BR>
<BR>
<BR>
<H3><LI>もっとも簡単な例</H3>
例(sample1.7th)<BR>
<FONT COLOR="#800080"><BR>
title 朝の挨拶<BR>
おはようございます。<BR>
今日はいい天気ですね。<BR>
end<BR>
</FONT><BR>
<BR>
と記載すると、プログラムが起動されると<BR>
<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
おはようございます。<BR>
今日はいい天気ですね。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
という文章がテキストエディターに表示される<BR>
<BR>
<FONT COLOR="#800080"><BR>
title </FONT>というキーワードはちょうどC言語のmain()宣言のようなもので<BR>
ストーリーの開始であることが宣言される<BR>
<BR>
<FONT COLOR="#800080"><BR>
朝の挨拶<BR>
</FONT><BR>
というのは、シナリオの名前を表しており、すべて全角文字で記載する<BR>
<FONT COLOR="#800080"><BR>
<BR>
おはようございます。<BR>
今日はいい天気ですね。<BR>
</FONT><BR>
<BR>
はシナリオの文章の本体であり、これもすべて全角文字で記載する<BR>
<BR>
<FONT COLOR="#800080"><BR>
end<BR>
</FONT><BR>
<BR>
は<FONT COLOR="#800080">title</FONT>からはじまるシナリオのブロックの終了を意味する。<BR>
文章の最初の<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
</FONT><BR>
<BR>
と最後の<BR>
<FONT COLOR="#800000"><BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
<BR>
は自動的に追加される<BR>
<BR>
<H3><LI>コメントの記入</H3>
七度言語のソースコードにはコメントを記載することができる。<BR>
ソースコードの第１文字目が半角文字<FONT COLOR="#800080">;</FONT>で始まる行はコメント行として扱われる。<BR>
例 sample2.7th<BR>
<FONT COLOR="#800080"><BR>
;**************************<BR>
;* 大学に行った時の出来事 *<BR>
;**************************<BR>
title 大学にいく<BR>
今日は大学にいって授業を受けました。<BR>
午後は、クラブの部室で友達とおしゃべりですごしました。<BR>
end</FONT><BR>
<BR>
<BR>
<H3><LI>複数のストーリーが生成される場合</H3>
<BR>
複数のストーリーを生成させるには、ストーリーの数だけ<BR>
title で始まるシナリオを作成すればよい<BR>
例 sample3.7th<BR>
<FONT COLOR="#800080"><BR>
title 大学にいく<BR>
今日は大学にいって授業を受けました。<BR>
午後は、クラブの部室で友達とおしゃべりですごしました。<BR>
end<BR>
title 映画を見に行く<BR>
今日は友達と待ち合わせをして、有楽町に映画を見にいきました。<BR>
映画のあとは、イタリア料理の店にいきました。<BR>
end<BR>
title お花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
ほかの大学からも男の子達が大勢きました。<BR>
end<BR>
</FONT><BR>
と記載すれば上記の３つのシナリオがランダムに表示される。<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は大学にいって授業を受けました。<BR>
午後は、クラブの部室で友達とおしゃべりですごしました。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
<BR>
<BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は友達と待ち合わせをして、有楽町に映画を見にいきました。<BR>
映画のあとは、イタリア料理の店にいきました。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
<BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
ほかの大学からも男の子達が大勢きました。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
<BR>
<H3><LI>シナリオの記述</H3>
<BR>
小説の開始以外のシナリオは<BR>
<FONT COLOR="#800080"><BR>
scene お酒を飲みに誘われました<BR>
帰ろうとすると男の子にお酒に誘われました。<BR>
駅の近くの居酒屋にみんなで入りました。<BR>
end<BR>
scene 居酒屋でお酒を飲む<BR>
居酒屋の中は民芸風に飾り付けがしてあって、<BR>
男の子達はよく飲みに来ている様子でした。<BR>
end<BR>
</FONT><BR>
などと記載する<BR>
シナリオの名称はシナリオを識別するためのキーワードとして使われるので、<BR>
かならずシナリオごとに固有の名前をつける。<BR>
シナリオは例(sample4.7th)<BR>
<FONT COLOR="#800080"><BR>
title お花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
ほかの大学からも男の子達が大勢きました。<BR>
{お酒を飲みに誘われました}<BR>
{居酒屋でお酒を飲む}<BR>
end<BR>
</FONT><BR>
と記載することにより、サブルーチンの様に呼び出すことができる。<BR>
生成される文章は以下のようになる。<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
ほかの大学からも男の子達が大勢きました。<BR>
帰ろうとすると男の子にお酒に誘われました。<BR>
駅の近くの居酒屋にみんなで入りました。<BR>
居酒屋の中は民芸風に飾り付けがしてあって、<BR>
男の子達はよく飲みに来ている様子でした。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
<BR>
シナリオはサブルーチン同様に実行が終了すると、呼び出し元に戻る。<BR>
しかし、リターン命令に相当する命令はないので、必ず最後の行の表示を行ったあと、<BR>
呼び出し元に戻る。<BR>
<BR>
次のような<BR>
空白行は記述できない。<BR>
<FONT COLOR="#800080"><BR>
scene お酒を飲みに誘われました<BR>
帰ろうとすると男の子にお酒に誘われました。<BR>
<BR>
駅の近くの居酒屋にみんなで入りました。<BR>
end<BR>
</FONT><BR>
また次のように１行で複数のシナリオを呼び出すことはできない。<BR>
<FONT COLOR="#800080"><BR>
title お花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
ほかの大学からも男の子達が大勢きました。<BR>
{お酒を飲みに誘われました}{居酒屋でお酒を飲む}<BR>
end<BR>
</FONT><BR>
また表示する行のない空のシナリオも定義できない。<BR>
例<BR>
<FONT COLOR="#800080"><BR>
scene 空行の表示<BR>
end<BR>
</FONT><BR>
<H3><LI>システムであらかじめ定義されたシナリオ</H3>
システムであらかじめ定義されたシナリオ名がある。<BR>
<FONT COLOR="#800080"><BR>
{章番号}<BR>
{段落}<BR>
<BR>
</FONT><BR>
についてはシステム固有のシナリオである。<BR>
<FONT COLOR="#800080">{章番号}{段落}</FONT>はあらかじめ定義されているので、<BR>
ユーザーが改めて定義する必要はない。<BR>
<FONT COLOR="#800080">{章番号}</FONT>は自動的に章番号を一つ増やしながら、<BR>
章番号の表示を行う。<BR>
章の最初は自動的に１文字下げて表示を行い段落を付ける。<BR>
<FONT COLOR="#800080">{段落}</FONT>は次に始まる行を１文字下げて段落を付ける。<BR>
段落をつけたいときはかならず<FONT COLOR="#800080">{章番号}{段落}</FONT>を用いる。<BR>
また<FONT COLOR="#800080">{章番号}{段落}</FONT>はシナリオをまたがって次に表示される行の段落を下げることが出来る。<BR>
例 sample5.7th<BR>
<FONT COLOR="#800080"><BR>
title お花見に行く<BR>
{章番号}<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
ほかの大学からも男の子達が大勢きました。<BR>
{章番号}<BR>
{お酒を飲みに誘われました}<BR>
{段落}<BR>
{居酒屋でお酒を飲む}<BR>
end<BR>
</FONT><BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
（１）<BR>
<BR>
　今日は、クラブのみんなとお花見に行きました。<BR>
ほかの大学からも男の子達が大勢きました。<BR>
<BR>
（２）<BR>
<BR>
　帰ろうとすると男の子にお酒に誘われました。<BR>
駅の近くの居酒屋にみんなで入りました。<BR>
　居酒屋の中は民芸風に飾り付けがしてあって、<BR>
男の子達はよく飲みに来ている様子でした。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
<BR>
<H3><LI>表示される度に異なる文章を表示する方法</H3>
シナリオの文章を表示ずくとき、同じ文章が毎回表示されるのでは、読んでいて面白くはない。<BR>
表示される度に違う文章が表示できるように工夫をした。<BR>
<BR>
<FONT COLOR="#800080">今日は、クラブのみんなとお(花見|忘年会)に行きました。<BR>
<BR>
</FONT>とシナリオの文章を記載すると(sample6.7th)次の二通りの文章がランダムに表示される<BR>
<BR>
<FONT COLOR="#800000">今日は、クラブのみんなとお花見に行きました。<BR>
<BR>
今日は、クラブのみんなとお忘年会に行きました。</FONT><BR>
<BR>
次のようなもっと複雑な書式(sample7.7th)も可能である。<BR>
<BR>
<FONT COLOR="#800080">(今日|昨日)は、(クラブ|研究室)のみんなと(お(花見|忘年会)に行きました|帰りに喫茶店でお茶をのみました)。<BR>
</FONT><BR>
また、空白の文字列も指定できるので、<BR>
次のように記載すると文字を記述するかしないかの選択を行える。<BR>
<BR>
<FONT COLOR="#800080">今日は、(クラブの|)みんなとお花見に行きました。</FONT><BR>
<BR>
と記述すると(sample8.7th)次の二つの文章がランダムに表示される<BR>
<BR>
<FONT COLOR="#800000">今日は、クラブのみんなとお花見に行きました。</FONT><BR>
<FONT COLOR="#800000">今日は、みんなとお花見に行きました。</FONT><BR>
<BR>
<H3><LI>継続行</H3>
２行以上に記載したテキストを１行として扱いたいときは<BR>
記号 <FONT COLOR="#800080">\</FONT> を用いる<BR>
例(sample9.7th)<BR>
<FONT COLOR="#800080"><BR>
title お花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
ほかの大学からも男の子達が大勢きましたが、\<BR>
知らない男の子達ばかりでした。<BR>
end</FONT><BR>
というシナリオは次の記載と同等である。<BR>
<FONT COLOR="#800080"><BR>
title お花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
ほかの大学からも男の子達が大勢きましたが、知らない男の子達ばかりでした。<BR>
end</FONT><BR>
<BR>
記号 <FONT COLOR="#800080">\ </FONT>はコメント行の連結には使用できない。<BR>
行の途中に記載された <FONT COLOR="#800080">\ </FONT>は無視される。<BR>
<BR>
<H3><LI>改行の挿入</H3>
テキスト表示の途中で改行を行いたい時は<BR>
記号 <FONT COLOR="#800080">/ </FONT>を用いる。<BR>

例(sample10.7th)<BR>
<FONT COLOR="#800080"><BR>
title お花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
ほかの大学からも男の子達が大勢きましたが、/知らない男の子達ばかりでした。<BR>
end</FONT><BR>
は次のように表示される。<BR>
<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
ほかの大学からも男の子達が大勢きましたが、<BR>
知らない男の子達ばかりでした。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
記号 <FONT COLOR="#800080">/ </FONT>はソースコードのテキストを表示するとき<BR>
改行を入れる。<BR>
ソースコード自体に改行を入れる訳ではない。<BR>
記号 <FONT COLOR="#800080">/ </FONT>は文章の最初にも記載出来る。<BR>
文章の最後に入れた場合は通常の改行が行われるだけである。<BR>
シナリオのシナリオ名には使用できない。<BR>
コメント行に記載できるが、改行記号としての機能は持たない。<BR>
記号 <FONT COLOR="#800080">/ </FONT>だけの行も記載可能で<FONT COLOR="#800080"> / </FONT>の個数だけ改行して表示を行う。<BR>
例(sample11.7th)<BR>
<FONT COLOR="#800080"><BR>
title お花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
//<BR>
ほかの大学からも男の子達が大勢きましたが、/知らない男の子達ばかりでした。<BR>
end</FONT><BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
<BR>
<BR>
ほかの大学からも男の子達が大勢きましたが、<BR>
知らない男の子達ばかりでした。<BR>
（完）<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
<H3><LI>行末改行の禁止</H3>
シナリオを表示するとき、行末では自動的に改行が挿入されて表示される。<BR>
行末での改行を行わないようにするには、行末に記号 <FONT COLOR="#800080">- </FONT>を追加する。<BR>
<BR>
例(sample12.7th)<BR>
<FONT COLOR="#800080"><BR>
title お花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
ほかの大学からも男の子達が大勢きましたが、-<BR>
知らない男の子達ばかりでした。<BR>
end</FONT><BR>
<BR>
記号<FONT COLOR="#800080">\ </FONT>を使用した場合は、ソースコードが１行に連結されるが、<BR>
<FONT COLOR="#800080">- </FONT>を使用した場合は、ソースコードを連結することはなく、<BR>
表示を行うときに、改行を行わないだけである。<BR>
記号<FONT COLOR="#800080">\ </FONT>は、シナリオの最終行に記述できないが、<BR>
<FONT COLOR="#800080">- </FONT>を使用した場合は、最終行に記述出来る。<BR>
例 最終行に記号<FONT COLOR="#800080">\ </FONT>を記述して文法エラーになる場合。<BR>
<FONT COLOR="#800080"><BR>
title お花見に行く<BR>
{クラブのみんなとお花見に行く}<BR>
{男の子が大勢来る}<BR>
end<BR>
scene クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、東京の桜と言ってそんなに珍しくはありませんでした。<BR>
男の子が数人、場所取りをして私たちを待っていました。<BR>
しばらく待っていると、\<BR>
end<BR>
scene 男の子が大勢来る<BR>
ほかの大学からも男の子達が大勢きました。<BR>
end<BR>
</FONT><BR>
この場合は<FONT COLOR="#800080">\ </FONT>記号によりテキスト文が連結され<BR>
<FONT COLOR="#800080"><BR>
しばらく待っていると、end<BR>
</FONT><BR>
となり、文法エラーとなる。<BR>
<BR>
例 最終行に記号<FONT COLOR="#800080">- </FONT>を記述する場合。(sample13.7th)<BR>
<FONT COLOR="#800080"><BR>
title お花見に行く<BR>
{クラブのみんなとお花見に行く}<BR>
{男の子が大勢来る}<BR>
end<BR>
scene クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、東京の桜と言ってそんなに珍しくはありませんでした。<BR>
男の子が数人、場所取りをして私たちを待っていました。<BR>
しばらく待っていると、-<BR>
end<BR>
scene 男の子が大勢来る<BR>
ほかの大学からも男の子達が大勢きました。<BR>
end</FONT><BR>
<BR>
は次のように表示される。<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、東京の桜と言ってそんなに珍しくはありませんでした。<BR>
男の子が数人、場所取りをして私たちを待っていました。<BR>
しばらく待っていると、ほかの大学からも男の子達が大勢きました。<BR>
（完）<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
記号<FONT COLOR="#800080">- </FONT>は上記の例の様にシナリオにまたがって、改行コードの挿入制御を行うことができるので、<BR>
記号<FONT COLOR="#800080">\ </FONT>とは異なる使い方が出来る。<BR>
記号<FONT COLOR="#800080">- </FONT>に続くシナリオが<BR>
<FONT COLOR="#800080"><BR>
{章番号}<BR>
{段落}<BR>
</FONT><BR>
の場合は改行挿入禁止は行わず、自動的に改行される。<BR>
例(sample14.7th)<BR>
<FONT COLOR="#800080">title クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。-<BR>
{段落}<BR>
桜は郷里で見慣れていたので、東京の桜と言ってそんなに珍しくはありませんでした。<BR>
男の子が数人、場所取りをして私たちを待っていました。-<BR>
{章番号}<BR>
しばらく待っていると、ほかの大学からも男の子達が大勢きました。<BR>
end</FONT><BR>
<BR>
<FONT COLOR="#800080">- </FONT>記号が先頭にある場合は以降の制御文字が無効となる<BR>
例(sample15.7th)<BR>
<FONT COLOR="#800080">scene クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
-/////-<BR>
桜は郷里で見慣れていたので、東京の桜と言ってそんなに珍しくはありませんでした。<BR>
end<BR>
</FONT>の様な場合は改行は行われない、またその他の制御文字も無効となりそのまま表示される<BR>
<BR>また記号<FONT COLOR="#800080">- </FONT>は記号<FONT COLOR="#800080">()</FONT>と組み合わせてより複雑な制御ができる。<BR>
例<BR>
<FONT COLOR="#800080"><BR>
scene クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、東京の桜と言ってそんなに珍しくはありませんでした。<BR>
男の子が数人、場所取りをして私たちを待っていました。<BR>
(待っていると、-|買い物をしていた女の子達も戻ってきました。)<BR>
end<BR>
</FONT><BR>
また改行禁止を行うか行わないかの選択を行う、次のようなテキストも記述できる。<BR>
<FONT COLOR="#800080"><BR>
scene クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、東京の桜と言ってそんなに珍しくはありませんでした。<BR>
男の子が数人、場所取りをして私たちを待っていました。<BR>
待っていると、(-|)<BR>
end<BR>
</FONT><BR>
<H3><LI>記号 \ / - の複雑な組み合わせ</H3>
記号 \ / - については複雑な組み合わせも可能であるが、なかには意味を持たない記述もある。いろいろな組み合わせについて解説しておこう。<BR>
<FONT COLOR="#800080">/\</FONT>の例(sample16.7th)<BR>
<OL><BR><FONT COLOR="#800080">title クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、/\<BR>
東京の桜と言ってそんなに珍しくはありませんでした。<BR>
end<BR>
</FONT>は次の記述と同等である。<BR>
<FONT COLOR="#800080">title クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、/東京の桜と言ってそんなに珍しくはありませんでした。<BR>
end
<BR>
したがって次の様に表示される<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、<BR>
東京の桜と言ってそんなに珍しくはありませんでした。<BR><BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
</OL>
</FONT><FONT COLOR="#800080">\/</FONT>の例(sample17.7th)<FONT COLOR="#800080"><BR>
<OL><BR>title クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、\/<BR>
東京の桜と言ってそんなに珍しくはありませんでした。<BR>
end<BR>
</FONT>は記号<FONT COLOR="#800080">\</FONT>が行末にないので無視され、記号<FONT COLOR="#800080">/</FONT>が行末にあるので次のように表示される。<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、\<BR>
東京の桜と言ってそんなに珍しくはありませんでした。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
</OL>

</FONT><FONT COLOR="#800080">/-</FONT>の例(sample18.7th)<BR>
<OL><BR><FONT COLOR="#800080">title クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、/-<BR>
東京の桜と言ってそんなに珍しくはありませんでした。<BR>
end<BR>
</FONT>は改行の挿入と、改行の禁止を同時に行っているので、以下の様に表示される。<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、<BR>
東京の桜と言ってそんなに珍しくはありませんでした。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
</OL>

</FONT><FONT COLOR="#800080">-/</FONT>の例(sample19.7th)<BR>
<OL><BR><FONT COLOR="#800080">title クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、-/<BR>
東京の桜と言ってそんなに珍しくはありませんでした。<BR>
end<BR>
</FONT>は<FONT COLOR="#800080">-</FONT>記号が行末にないので無視され、以下の様に表示される。<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、-<BR>
東京の桜と言ってそんなに珍しくはありませんでした。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
</OL>

<BR>
<FONT COLOR="#800080">-\の例(sample20.7th)</FONT><BR>
<OL><BR><FONT COLOR="#800080"><BR>
title クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、-\<BR>
東京の桜と言ってそんなに珍しくはありませんでした。<BR>
end<BR>
</FONT>は<FONT COLOR="#800080">\</FONT>記号によって行が連結され、<FONT COLOR="#800080">-</FONT>記号が行末ではないので無視され以下の様に表示される。<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、-東京の桜と言ってそんなに珍しくはありませんでした。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
</OL><BR>

<FONT COLOR="#800080">\-</FONT>の例(sample21.7th)<FONT COLOR="#800080"><BR>
<OL><BR>title クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。\-<BR>
桜は郷里で見慣れていたので、東京の桜と言ってそんなに珍しくはありませんでした。<BR>
end<BR>
</FONT>は<FONT COLOR="#800080">\</FONT>記号が行末ではないので無視され以下の様に表示される。<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、\東京の桜と言ってそんなに珍しくはありませんでした。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
</OL>

<BR>
<H3><LI>記号 / - の組み合わせの特殊な場合</H3>
記号 / - の組み合わせについては特殊な場合がありこのれらについても解説しておく。<BR>
<BR>
例 改行挿入<FONT COLOR="#800080">/</FONT>のみの行との組み合わせ<BR>
<BR>
例１(sample22.7th)<BR>
<OL><FONT COLOR="#800080"><BR>title クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。-<BR>
///<BR>
桜は郷里で見慣れていたので、<BR>
東京の桜と言ってそんなに珍しくはありませんでした。<BR>
end</FONT><BR>
については<FONT COLOR="#800080">-</FONT>の行の行末の改行が行われないため、改行が一つ少なくなり、以下の様に表示される。<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、<BR>
<BR>
<BR>
東京の桜と言ってそんなに珍しくはありませんでした。今日は、クラブのみんなとお花見に行きました。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
</OL>

<BR>
例２(sample23.7th)<BR>
<OL><BR>
<FONT COLOR="#800080">title クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。-<BR>
/<BR>
桜は郷里で見慣れていたので、<BR>
東京の桜と言ってそんなに珍しくはありませんでした。<BR>
end</FONT><BR>
については同様に、以下の様に表示される。<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、<BR>
東京の桜と言ってそんなに珍しくはありませんでした。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
</OL>

<BR>
例３(sample24.7th)<BR>
<OL><BR>
<FONT COLOR="#800080">title クラブのみんなとお花見に行く<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
//-<BR>
桜は郷里で見慣れていたので、<BR>
東京の桜と言ってそんなに珍しくはありませんでした。<BR>
end</FONT><BR>
については改行のみの行は表示するメッセージがないため、メッセージ末の改行も行われない。<BR>
したがって-は意味を持たずに無視され以下の様に表示される。<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
今日は、クラブのみんなとお花見に行きました。<BR>
桜は郷里で見慣れていたので、<BR>
<BR>
<BR>
東京の桜と言ってそんなに珍しくはありませんでした。今日は、クラブのみんなとお花見に行きました。<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
</OL>

<H3><LI>シナリオの分岐</H3>
複数のシナリオのどれかを選択して用いたい時は分岐を用いる。<BR>
分岐はselectで始まり、選択するシナリオのリストの一覧のあと、<BR>
endで終わる。<BR>
分岐の呼び出しはシナリオの呼び出しと同様に<BR>
{分岐名}<BR>
で行う。<BR>
分岐とシナリオは文法上は同じ形式で呼び出すことが出来る。<BR>
分岐を呼び出すと実行後はシナリオと同様に呼び出し元に戻る。<BR>
例(sample25.7th)<BR>
<FONT COLOR="#800080"><BR>
title 合コンでお酒を飲む<BR>
{合コンに誘われる理由}<BR>
遅くまでお酒を飲んだので帰りが遅くなりました<BR>
end<BR>
select 合コンに誘われる理由<BR>
お花見に誘われる<BR>
忘年会に誘われる<BR>
end<BR>
scene お花見に誘われる<BR>
春になって、お花見に誘われました<BR>
end<BR>
scene 忘年会に誘われる<BR>
年末になって、教室の忘年会に誘われました<BR>
end<BR>
</FONT>と記載すると<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
春になって、お花見に誘われました<BR>
遅くまでお酒を飲んだので帰りが遅くなりました<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
<BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
年末になって、教室の忘年会に誘われました<BR>
遅くまでお酒を飲んだので帰りが遅くなりました<BR>
（完）<BR>
<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
の二通りの文章が生成される。<BR>
誤った例<BR>
分岐文では<BR>
分岐が空の文は記述できない。<BR>
例<BR>
<FONT COLOR="#800080">select 合コンに誘われる理由<BR>
end</FONT><BR>
また次の例は文法エラーであるので<BR>
<FONT COLOR="#800080">select 合コンに誘われる理由<BR>
{お花見に誘われる}<BR>
{忘年会に誘われる}<BR>
end</FONT><BR>
と記載しないように注意すること。<BR>
<FONT COLOR="#800080">{}</FONT>記号の記載は不要である。<BR>
<BR>
<H3><LI>プログラムの構造</H3>
七度言語には終了命令はない。<BR>
titleで始まるシナリオの最初の文章から始まり、title内の最後の文章で終わる<BR>
sceneとselectで記述されるシナリオや、分岐を呼び出した時は、<BR>
表示が終わった場合は必ず呼び出し元に制御が戻る。<BR>
シナリオは、他のシナリオや、分岐を呼び出すことができる。<BR>
分岐は、分岐の対象として、シナリオと分岐を呼び出せる。<BR>
シナリオと分岐を組み合わせて階層構造を作ることができる。<BR>
特定のラベルへのジャンプ命令はない。<BR>
ループ命令はない。<BR>
表示がループしたときは、表示は強制終了する<BR>
七度言語で可能なのは、シナリオと分岐からなる入れ子の構造だけである。<BR>
<H3><LI>文字変数の定義</H3>
七度言語では文字変数を使用出来る。<BR>
文字変数名には全角文字を用いる。<BR>
文字変数は階層構造をもたせるために変数名にピリオド<FONT COLOR="#800080"> .</FONT> を用いることができる。<BR>
例(sample26.7th)<BR>
<FONT COLOR="#800080"><BR>
title 入学式で女友達と知り合う<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
[女友達=礼子さん]<BR>
女の子は[女友達]という名前で、素敵なワンピースを着ていました。<BR>
end<BR>
</FONT><BR>
というシナリオは以下の様に表示される。<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
女の子は礼子さんという名前で、素敵なワンピースを着ていました。<BR>
<BR>
（完）<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
変数名は<FONT COLOR="#800080">女友達</FONT>であり<BR>
<FONT COLOR="#800080">[女友達=礼子さん]</FONT><BR>
は<FONT COLOR="#800080">女友達</FONT>という変数に<FONT COLOR="#800080">礼子さん</FONT>という値を代入することを意味する。<BR>
この文章は、代入を指示するだけなので、実際には表示されることはない。<BR>
<FONT COLOR="#800080">[女友達]</FONT>と、変数を<FONT COLOR="#800080">[]</FONT>でくくると、変数の値を表示する。<BR>
変数は最初の代入文で自動的に定義されるので、前もって宣言文などで宣言する必要はない。<BR>
代入文には<BR>
<FONT COLOR="#800080">[女友達=]</FONT><BR>
との書式も可能で、この場合はNULL文字列を代入することを意味する。<BR>
変数の値がNULL文字列であることと、変数が未定義であることは、同等の事として扱われる。<BR>
変数が未定義またはNULL文字列であるときは変数の表示は、変数名の文字が用いられる。<BR>
<BR>
例(sample27.7th)<BR>
<FONT COLOR="#800080"><BR>
title 女友達と喫茶店にはいる<BR>
私は[女友達]と、入学式のあと喫茶店でお茶を飲みました。<BR>
end<BR>
</FONT><BR>
というシナリオは<FONT COLOR="#800080">[女友達]</FONT>が未定義なので以下の様に表示される。<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
私は女友達と、入学式のあと喫茶店でお茶を飲みました。<BR>
<BR>
（完）<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------</FONT><BR>
<BR>
<H3><LI>文字変数の代入における()|記号の使用</H3>
文字変数を代入するときには、()|記号を用いることができる。<BR>
<BR>
例<FONT COLOR="#800080"><BR>
<BR>
[女友達=礼子さん|芳恵さん]<BR>
[女友達=(礼子さん|芳恵さん)]</FONT><BR>
<BR>
上記の二つの例は異なる意味を持つ。<BR>
一番外側の()を省略した場合には()|についての処理は、<BR>
変数の代入時に行われる。<BR>
例(sample28.7th)<BR><FONT COLOR="#800080"><BR>
title 女友達と喫茶店にはいる<BR>
[女友達=礼子さん|芳恵さん]<BR>
私は[女友達]と、入学式のあと喫茶店でお茶を飲みました。<BR>
end</FONT><BR>
<BR>一番外側に()付けた場合はには()|についての処理は、<BR>
変数の表示時に行われる。<BR>
例(sample29.7th)<BR><FONT COLOR="#800080"><BR>
title 女友達と喫茶店にはいる<BR>
入学式は午前中で終わりました。[女友達=(礼子さん|芳恵さん)]<BR>
私は[女友達]と、入学式のあと喫茶店でお茶を飲みました。<BR>
[女友達]が、「今日は暑いわね」といいながら上着を脱ぎました。<BR>
私はバニラシェイクを飲みたかったのですが[女友達]が勝手に「みんなコーヒーでいいわよね」といいながらコーヒーを注文してしまいました。<BR>
[女友達]が「授業始まるのはいつからかしらね」と言い出しました。<BR>
end</FONT><BR>
<BR>
<H3><LI>文字変数の表示回数カウンター</H3>
文字変数は、文章の一部として表示された回数を数えるカウンターを持っている<BR>
カウンターは最初に定義されたときには０の値を持つ<BR>
一度使用される度に＋１される<BR>
カウンターを参照するには<BR>
<FONT COLOR="#800080">$女友達</FONT><BR>
を用いる。数値<FONT COLOR="#800080">$女友達</FONT>は文章の文字としては表示できないが、後述する条件文で使用できる。<BR>
変数にnullを代入すると、表示カウンターは0にリセットされる。<BR>
<H3><LI>数値変数の定義</H3>
七度言語では数値変数を使用出来る。<BR>
プログラム内部では倍精度実数で保存される。<BR>
単精度実数、整数、倍精度整数などの変数の区別はないので、<BR>
すべて倍精度実数として扱う。<BR>
数値変数名は先頭文字が半角の%で始まり残りの文字は全角文字を用いる。<BR>
数値変数は階層構造をもたせるために変数名にピリオド<FONT COLOR="#800080"> .</FONT> を用いることができる。<BR>
数値変数の代入を行うには<BR>
<FONT COLOR="#800080">[%女友達の年齢=21]</FONT> <BR>
などと記述する。<BR>
文章の文字として表示するときは<BR>
<FONT COLOR="#800080">[%女友達]</FONT><BR>
と記載する。<BR>
数値変数はC言語と同様の演算が可能で<BR>
<FONT COLOR="#800080">[%女友達の年齢++]<BR>
[%女友達の年齢--]<BR>
[%女友達の年齢+=10]<BR>
[%女友達の年齢-=10]</FONT><BR>
などの演算がが記述出来る。<BR>
数値変数には表示回数のカウンターはない。<BR>
例(sample30.7th)<BR>
<FONT COLOR="#800080">
title 女友達の年齢<BR>
[%女友達の年齢=18]<BR>
女友達は[%女友達の年齢]歳です。<BR>
[%女友達の年齢++]<BR>
一年後は[%女友達の年齢]歳です。<BR>
[%先輩の年齢=20]<BR>
先輩は[%先輩の年齢]歳です。<BR>
[%先輩の年齢--]<BR>
一年前は[%先輩の年齢]歳でした。<BR>
end<BR>
</FONT>
例(sample31.7th)<BR>
<FONT COLOR="#800080">
title 女友達の年齢<BR>
[%女友達の年齢=18]<BR>
女友達は[%女友達の年齢]歳です。<BR>
[%女友達の年齢+=10]<BR>
十年後は[%女友達の年齢]歳です。<BR>
[%先輩の年齢=20]<BR>
先輩は[%先輩の年齢]歳です。<BR>
[%先輩の年齢-=10]<BR>
十年前は[%先輩の年齢]歳でした。<BR>
end
</FONT>
<BR>
<BR>
<H3><LI>変数の代入、表示と、メッセージ文</H3>
変数の代入と、表示メッセージは一行に混在できる。<BR>
<BR>
例(sample32.7th)<BR>
<FONT COLOR="#800080"><BR>
title 入学式で女友達と知り合う<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
女の子[女友達=礼子さん]は[女友達]という名前で、素敵なワンピースを着ていました。<BR>
end<BR>
</FONT><BR>
また一行で同一の変数に異なる値を代入することも出来る。<BR>
例(sample33.7th)
<FONT COLOR="#800080"><BR>
title 入学式で女友達と知り合う<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
女の子[女友達=礼子さん]は[女友達]という名前で、[女友達=芳恵さん]一緒に来た[女友達]を紹介してくれました。<BR>
end<BR>
</FONT><BR>
変数の代入と表示は、文頭から文末の順に処理される。<BR>
<BR>
<H3><LI>変数の代入、表示と、()|記号の組み合わせ</H3>
<BR>
()|記号と変数の代入を組み合わせて使用する場合、注意が必要となる<BR>
<BR>
例(sample34.7th)
<FONT COLOR="#800080"><BR>
<BR>
title 入学式で女友達と知り合う<BR>
式が終わると隣の女の子[女友達=礼子さん|芳恵さん]が話しかけてきました。|私の隣には、見かけたことるある女の子[女友達=礼子さん|芳恵さん]が座っていました。<BR>
女の子は[女友達]で入学試験の時隣だったのを思い出しました。<BR>
end</FONT><BR>
<BR>
というシナリオの場合は、最初に変数の代入内の()|記号を除外して()|記号についての処理を行い、次に変数の代入についての処理を文頭から文末方向に行う。<BR>
変数の代入についての<FONT COLOR="#800080">|</FONT>記号は変数の代入についてのみ有効となる。<BR>
したがって、上記はのメッセージはいったん<FONT COLOR="#800080"><BR>
<BR>
式が終わると隣の女の子[女友達=礼子さん|芳恵さん]が話しかけてきました。<BR>
<BR>
私の隣には、見かけたことるある女の子[女友達=礼子さん|芳恵さん]が座っていました。</FONT><BR>
のいずれかに展開されてから、変数の代入が行われる<BR>
<H3><LI>変数によるメッセージ文の制御</H3>
変数の値による条件文を作成して、メッセージ文の表示を制御できる<BR>
例(sample35.7th)<BR>
<FONT COLOR="#800080"><BR>
title 入学式で礼子さんと知り合う<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
[女友達=礼子さん]<BR>
{女友達の様子}<BR>
end<BR>
scene 女友達の様子<BR>
女の子は[女友達]という名前で、&lt;女友達==礼子さん&gt;素敵なワンピースを&lt;女友達==芳恵さん&gt;紺のスーツを;着ていました。<BR>
end<BR>
</FONT><BR>
は次のように文章が生成される<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
女の子は礼子さんという名前で、素敵なワンピースを着ていました。<BR>
<BR>
（完）<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------</FONT><BR>
<BR>
条件式<FONT COLOR="#800080">&lt;女友達==礼子さん&gt;</FONT>が正の時は条件式に続くテキスト文章が表示される。<BR>
次の条件式<FONT COLOR="#800080">&lt;女友達==芳恵さん&gt;</FONT>まで表示を行った後、条件式の正誤が再度判定される<BR>
<FONT COLOR="#800080">;</FONT>記号は条件式の解除を意味する。<BR>
<BR>
次の例(sample36.7th)の場合は<BR>
<FONT COLOR="#800080"><BR>
title 入学式で芳恵さんと知り合う<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
[女友達=芳恵さん]<BR>
{女友達の様子}<BR>
end<BR>
</FONT><BR>
次のように文章が生成される<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
女の子は芳恵さんという名前で、紺のスーツを着ていました<BR>
<BR>
（完）----------- Copy Right 七度 柚希 （なのたび ゆき）--------</FONT><BR>
<BR>
<BR>
また次のようなより複雑な構文も可能である。<BR>
例(sample37.7th)<FONT COLOR="#800080"><BR>
scene 女友達の様子<BR>
女の子は[女友達]という名前で、(&lt;女友達==礼子さん&gt;素敵なワンピースを&lt;女友達==芳恵さん&gt;紺のスーツを;着ていました。|&lt;女友達==礼子さん&gt;甲府の出身&lt;女友達==芳恵さん&gt;高校はこの近所;だそうでした。)<BR>
end</FONT><BR>
この場合は生成されるのは<FONT COLOR="#800080">&lt;女友達==礼子さん&gt;</FONT>が正の時は、先ほどの例<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
女の子は礼子さんという名前で、素敵なワンピースを着ていました<BR>
<BR>
（完）<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------</FONT><BR>
<BR>
ともう一つ次の文章のどちらかがランダムに生成される<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました<BR>
女の子は礼子さんという名前で、甲府の出身だそうでした。<BR>
<BR>
（完）<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------</FONT><BR>
<BR>
メッセージの表示の手順は<BR>
<BR>
最初に（）についての表示の選択を行う。<BR>
文章の先頭から順に文字変数の代入と、条件式についての表示の選択を行う、<BR>
<BR>
となるので<BR>
順に経過をたどると、<FONT COLOR="#800080">&lt;女友達==礼子さん&gt;</FONT>が正の時は<BR>
最初のテキスト<BR>
<FONT COLOR="#800080"><BR>
女の子は[女友達]という名前で、(&lt;女友達==礼子さん&gt;素敵なワンピースを&lt;女友達==芳恵さん&gt;紺のスーツを;着ていました。|&lt;女友達==礼子さん&gt;甲府の出身&lt;女友達==芳恵さん&gt;高校はこの近所;だそうでした。)<BR>
</FONT><BR>
は次の２通りのテキストのどちらかに変換される<BR>
<FONT COLOR="#800080"><BR>
女の子は[女友達]という名前で、&lt;女友達==礼子さん&gt;素敵なワンピースを&lt;女友達==芳恵さん&gt;紺のスーツを;着ていました。<BR>
<BR>
<BR>
女の子は[女友達]という名前で、&lt;女友達==礼子さん&gt;甲府の出身&lt;女友達==芳恵さん&gt;高校はこの近所;だそうでした。<BR>
</FONT><BR>
さらに条件式の判定が行われる。<BR>
文字変数は条件判定と同時に文章の先頭から順に書き換えられて最終的には<BR>
<FONT COLOR="#800080"><BR>
女の子は礼子さんという名前で、素敵なワンピースを着ていました。<BR>
<BR>
<BR>
女の子は礼子さんという名前で、甲府の出身だそうでした。<BR>
</FONT><BR>
のいずれかが表示されることになる。<BR>
<BR>
<BR>
<BR>
<H3><LI>変数によるシナリオの制御</H3>
変数の値による条件文を作成して、シナリオを制御できる<BR>
例(sample38.7th)
<FONT COLOR="#800080"><BR>
title 入学式で女友達と知り合う<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
{女友達と知り合う場合}<BR>
{&lt;女友達==礼子さん&gt;礼子さんのマンションに寄る&lt;女友達==芳恵さん&gt;芳恵さんのアパートに寄る;自分のアパートに帰る}<BR>
end<BR>
select 女友達と知り合う場合<BR>
礼子さんと知り合う<BR>
芳恵さんと知り合う<BR>
end<BR>
scene 礼子さんと知り合う<BR>
[女友達=礼子さん]<BR>
女の子は[女友達]という名前で、素敵なワンピースを着ていました。<BR>
end<BR>
scene 芳恵さんと知り合う<BR>
[女友達=芳恵さん]女の子は[女友達]という名前で、紺のスーツを着ていました。<BR>
end<BR>
scene 礼子さんのマンションに寄る<BR>
私は大学からの帰りに[女友達]のマンションに寄りました。<BR>
お母様と一緒に選んだマンションで、入り口には警備の部屋もありずいぶんと立派でした。<BR>
end<BR>
scene 芳恵さんのアパートに寄る<BR>
私は大学からの帰りに[女友達]のアパートに寄りました。<BR>
[女友達]のアパートは私の借りたアパートの近くで、大学生の女の子が多いとの話でした。<BR>
end<BR>
scene 自分のアパートに帰る<BR>
入学式も終わると、私はアパートに帰って部屋の掃除をしました。<BR>
end</FONT><BR>
<BR>
上記の<FONT COLOR="#800080">&lt;女友達==礼子さん&gt;</FONT>と<FONT COLOR="#800080">&lt;女友達==芳恵さん&gt;</FONT>が条件文である。<BR>
<FONT COLOR="#800080">&lt;女友達==礼子さん&gt;</FONT>は変数である<FONT COLOR="#800080">女友達</FONT>の内容が<FONT COLOR="#800080">礼子</FONT>さんであるとき、<BR>
それに続くシナリオを実行することを示す。<BR>
<FONT COLOR="#800080">;</FONT>はデフォルトのシナリオであり、前に続く条件文のいずれもが誤であるとき実行される<BR>
生成される文章は分岐の選択肢により次の二つになる。<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
女の子は礼子さんという名前で、素敵なワンピースを着ていました。<BR>
私は大学からの帰りにの礼子さんマンションに寄りました。<BR>
お母様と一緒に選んだマンションで、入り口には警備の部屋もありずいぶんと立派でした。<BR>
<BR>
（完）<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
<BR>
<BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
女の子は芳恵さんという名前で、紺のスーツを着ていました。<BR>
私は大学からの帰りに芳恵さんのアパートに寄りました。<BR>
芳恵さんのアパートは私の借りたアパートの近くで、大学生の女の子が多いとの話でした。<BR>
<BR>
（完）<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
</FONT><BR>
条件式は文字変数については<BR>
<FONT COLOR="#800080">&lt;女友達==礼子さん&gt;<BR>
&lt;女友達!=礼子さん&gt;</FONT><BR>
<FONT COLOR="#800080">&lt;女友達==&gt;<BR>
&lt;女友達!=&gt;</FONT><BR>
の書式が可能である<BR>
<FONT COLOR="#800080">&lt;女友達==&gt;</FONT><BR>
はNULL文字列との比較を意味するので<BR>
変数<FONT COLOR="#800080">女友達</FONT>がまだ未定義であるとき正となる。<BR>
<FONT COLOR="#800080">&lt;女友達!=&gt;</FONT>は、<BR>
変数<FONT COLOR="#800080">女友達</FONT>が定義済みであるとき正となる。<BR>
<BR>
数値変数と文字変数のカウンターについては<BR>
<FONT COLOR="#800080"><BR>
&lt;%女友達の年齢==22&gt;<BR>
&lt;%女友達の年齢!=22&gt;<BR>
&lt;%女友達の年齢&lt;=22&gt;<BR>
&lt;%女友達の年齢&gt;=22&gt;</FONT><BR>
などが可能である。<BR>
<H3><LI>変数による分岐の制御</H3>
変数の値による条件文を作成して、分岐文を制御できる<BR>
シナリオ <BR>
<FONT COLOR="#800080"><BR>
礼子さんのマンションに寄る<BR>
芳恵さんのアパートに寄る<BR>
自分のアパートに帰る<BR>
</FONT><BR>
については全章の記述を用いることにする<BR>
例(sample39.7th)<BR>
<FONT COLOR="#800080"><BR>
title 入学式で女友達と知り合う<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
{女友達と知り合う場合}<BR>
{入学式のあとの場合}<BR>
end<BR>
select 入学式のあとの場合<BR>
&lt;女友達==礼子さん&gt;礼子さんのマンションに寄る<BR>
&lt;女友達==芳恵さん&gt;芳恵さんのアパートに寄る<BR>
自分のアパートに帰る<BR>
end<BR>
</FONT><BR>
条件<FONT COLOR="#800080">&lt;女友達==礼子さん&gt;&lt;女友達==芳恵さん&gt;</FONT>が正の場合のみ分岐が可能になる。<BR>
条件が指定されないシナリオと、条件が正のものの中からランダムに選択が行われる<BR>
条件が正のものが優先的に選択されるわけではいので、<BR>
この場合は<FONT COLOR="#800080">自分のアパートに帰る</FONT>というシナリオが選択される場合もある。<BR>
分岐によおいて条件設定を行う場合は前章で示したシナリオの場合よりも、<BR>
高度な設定が可能になる。<BR>
例えば(sample40.7th)<BR>
<FONT COLOR="#800080"><BR>
select 入学式のあとの場合<BR>
&lt;女友達==礼子さん&gt;礼子さんのマンションに寄る<BR>
&lt;女友達==礼子さん&gt;礼子さんと喫茶店でお茶を飲む<BR>
&lt;女友達==芳恵さん&gt;芳恵さんのアパートに寄る<BR>
&lt;女友達==芳恵さん&gt;芳恵さんと近所のスーパーに買い物に行く<BR>
自分のアパートに帰る<BR>
近所のスーパーに買い物に行く<BR>
end<BR>
</FONT>などの複雑な分岐の制御が可能になる。<BR>
（注シナリオ<FONT COLOR="#800080"><BR>
礼子さんと喫茶店でお茶を飲む<BR>
芳恵さんと近所のスーパーに買い物に行く<BR>
近所のスーパーに買い物に行く</FONT><BR>
については別途定義されているとする。）<BR>
<BR>
上記の分岐では、<FONT COLOR="#800080"><BR>
&lt;女友達==礼子さん&gt;</FONT>が成り立つときは<BR>
<FONT COLOR="#800080"><BR>
select 入学式のあとの場合<BR>
礼子さんのマンションに寄る<BR>
礼子さんと喫茶店でお茶を飲む<BR>
自分のアパートに帰る<BR>
近所のスーパーに買い物に行く<BR>
end</FONT><BR>
という分岐文と同じ分岐を行う<BR>
また<BR>
<FONT COLOR="#800080">&lt;女友達==芳恵さん&gt;</FONT>が成り立つときは<BR>
<FONT COLOR="#800080"><BR>
select 入学式のあとの場合<BR>
芳恵さんのアパートに寄る<BR>
芳恵さんと近所のスーパーに買い物に行く<BR>
自分のアパートに帰る<BR>
近所のスーパーに買い物に行く<BR>
end<BR>
</FONT><BR>
という分岐文と同じ分岐を行う<BR>
<BR>
変数<FONT COLOR="#800080">女友達</FONT>が未定義の場合は<BR>
<FONT COLOR="#800080"><BR>
select 入学式のあとの場合<BR>
自分のアパートに帰る<BR>
近所のスーパーに買い物に行く<BR>
end<BR>
</FONT><BR>
と同じ分岐を行う。<BR>
<H3><LI>シナリオの実行禁止</H3>
文章を生成させたくないシナリオを実行禁止に出来る<BR>
例(sample41.7th)<FONT COLOR="#800080"><BR>
title 入学式で女友達と知り合う<BR>
{!礼子さんと知り合う}<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
{礼子さんと知り合う}<BR>
{芳恵さんと知り合う}<BR>
end<BR>
</FONT><BR>
と記述したときは<FONT COLOR="#800080">!</FONT>が実行禁止を指示する記号であり<BR>
<FONT COLOR="#800080">礼子さんと知り合う</FONT>というシナリオが実行禁止になる。<BR>
生成される文章は<BR>
<FONT COLOR="#800000"><BR>
-------------- 七度文庫 （なのたびぶんこ） -------------<BR>
<BR>
入学式が終わると、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
女の子は芳恵さんという名前で、紺のスーツを着ていました。<BR>
<BR>
（完）<BR>
----------- Copy Right 七度 柚希 （なのたび ゆき）--------<BR>
<BR>
</FONT>となる。実行禁止の解除は<FONT COLOR="#800080"><BR>
{#礼子さんと知り合う}<BR>
</FONT>と記述する<BR>
<FONT COLOR="#800080">#</FONT>が実行禁止の解除を指定する記号である。<BR>
<H3><LI>分岐における優先度の指定</H3>
分岐の際に選択されるシナリオの優先度を上げたい場合は優先度を一つあげるコマンドを用いる<BR>
例(sample42.7th)<BR>
<FONT COLOR="#800080">title 入学式で女友達と知り合う<BR>
入学式の時、入学試験のとき隣の席だった女の子が私を見つけて声をかけてきました。<BR>
{&amp;+自分のアパートに帰る}<BR>
{入学式のあとの場合}<BR>
end<BR>
select 入学式のあとの場合<BR>
礼子さんのマンションに寄る<BR>
礼子さんと喫茶店でお茶を飲む<BR>
自分のアパートに帰る<BR>
近所のスーパーに買い物に行く<BR>
end</FONT><BR>
とした場合は<FONT COLOR="#800080">自分のアパートに帰る</FONT>の<BR>
優先度があがり優先的に分岐の選択が行われる。<BR>
優先度は初期値は０でありコマンドを一回実行するたびに＋１される。<BR>
一度あげた優先度を下げるには<BR>
<FONT COLOR="#800080">{&amp;-自分のアパートに帰る}</FONT><BR>
と指定する。<BR>
ただし優先度は０より小さい値に下げることはできない。<BR>
選択したくないシナリオは先の実行禁止コマンドで<BR>
<FONT COLOR="#800080">{!自分のアパートに帰る}</FONT><BR>
と実行禁止にすれば分岐で選択されることはない。<BR>
<H3><LI>小説の更新を行った時のフラグの設定</H3>
更新のコマンドを実行すると、小説が再度生成される。<BR>
このとき、シナリオの禁止フラグや、優先度などはすべて初期値に設定される。<BR>
前回の小説生成時に設定された、禁止フラグや、優先度の指定を次回の生成に引き継がせることはできない。<BR>
<H3><LI>小説の生成を繰り返し行った時の分岐の制御</H3>
分岐の選択を実行する際には<BR>
<BR>
実行禁止の指定があれば除外する。<BR>
条件が指定されているときは、条件がなりたつものだけを選ぶ<BR>
優先度のもっとも高いものを選択する。<BR>
優先度の高いものが複数あれば、乱数により選択するシナリオを決める。<BR>
<BR>
という手順で、分岐の選択を決定する。<BR>
しかし乱数による選択を行った場合は、選択に偏りがでて、<BR>
同じシナリオが繰り返し選択されたり、また特定のシナリオがまったく選択されないという状況が発生することがよくある。<BR>
せっかく用意したシナリオでも１０００回小説の生成を繰り返しても、表示されないというのは事になっいては都合が悪い。<BR>
そこで、シナリオごとにカウンターを持ち、表示された回数をカウントしている。<BR>
分岐にも同様に同じカウンターがある。<BR>
カウンターの値は、プログラム終了時に<BR>
7thnovels.dat<BR>
というファイルに保存される。<BR>
このファイルをのエディターであけてみると<BR>
132 59<BR>
0 59<BR>
0 59<BR>
0 59<BR>
0 59<BR>
132 59<BR>
0 59<BR>
0 59<BR>
0 59<BR>
0 59<BR>
0 59<BR>
0 59<BR>
132 59<BR>
3 59<BR>
2 59<BR>
3 59<BR>
2 59<BR>
1 59<BR>
といったテキストファイルが延々と続く<BR>
最初の一列目が、シナリオの表示された回数であり、<BR>
２列目の値は、将来の拡張用であり、現在はプログラムが起動された回数が入っている。<BR>
インターネットで公開されている制限バージョンでは<BR>
4429行のデータがあり、<BR>
シナリオと分岐の総数が４４２９個ということになる。<BR>
分岐の際にはこの値が低いものを優先的に選択する。<BR>
したがって、分岐の選択手順は<BR>
<BR>
実行禁止の指定があれば除外する。<BR>
条件が指定されているときは、条件がなりたつものだけを選ぶ<BR>
優先度のもっとも高いものを選択する。<BR>
使用された回数の少ないシナリオを選択する。<BR>
使用された回数が同じものがあれば、乱数により選択するシナリオを決める。<BR>
<BR>
ということになる。<BR>
<H3><LI>将来の拡張</H3>
将来の拡張機能として以下の項目を予定している<BR>
シナリオ呼び出し時の、呼び出しパラメータの指定を可能とする<BR>
例<BR>
<FONT COLOR="#800080"><BR>
title<BR>
{女友達と飲食店に行く}[女友達=礼子さん][飲食店=喫茶店]<BR>
end<BR>
scene 女友達と飲食店に行く<BR>
私は[女友達]と[飲食店]に寄ることにしました。<BR>
end<BR>
</FONT><BR>
<BR>
文字変数に集合を可能にする<BR>
例<BR>
<FONT COLOR="#800080"><BR>
title 入学式に出る<BR>
[服装=ブラウス+セータ+スカート]<BR>
{セーターを脱ぐ}<BR>
end<BR>
scene セーターを脱ぐ<BR>
暑かったのでセーター脱ぎました。<BR>
[服装-=セータ]<BR>
end<BR>
</FONT><BR>
<BR>
文字変数の階層構造の操作を可能にして不定形データベースの機能を強化する</OL>

</BODY>
</HTML>
